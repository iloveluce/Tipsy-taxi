<!doctype html>
<!--[if IE 7 ]>    <html lang="en-gb" class="isie ie7 oldie no-js"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en-gb" class="isie ie8 oldie no-js"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en-gb" class="isie ie9 no-js"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en-gb" class="no-js">
<style>
.team-pic{
  width: auto;
  max-width: 300px;
  height: auto;
  max-height: 220px;
}
</style>
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!--[if lt IE 9]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <![endif]-->
    <title>Tipsy Taxi</title>
    <meta name="description" content="">
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lte IE 8]>
		<script type="text/javascript" src="http://explorercanvas.googlecode.com/svn/trunk/excanvas.js"></script>
	<![endif]-->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/isotope.css" media="screen" />
    <link rel="stylesheet" href="js/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/da-slider.css" />

    <!-- Owl Carousel Assets -->
    <link rel="stylesheet" href="css/styles.css" />
    <!-- Font Awesome -->
    <link href="font/css/font-awesome.min.css" rel="stylesheet">

</head>

<body>
    <header class="header">
        <div class="container">
            <nav class="navbar navbar-inverse" role="navigation">
                <div class="navbar-header">
                    <button type="button" id="nav-toggle" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="#" class="navbar-brand scroll-top logo"><b>Tipsy Taxi</b></a>
                </div>
                <!--/.navbar-header-->
                <div id="main-nav" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav" id="mainNav">
                        <li class="active"><a href="#home" class="scroll-link">Home</a></li>
                        <li><a href="#nyctaxis" class="scroll-link">Introduction</a></li>
                        <li><a href="#fraud" class="scroll-link">Fraud</a></li>
                        <li><a href="#traffic" class="scroll-link">Traffic</a></li>
                        <li><a href="#portfolio" class="scroll-link">For Drivers</a></li>
                        <li><a href="#passengers" class="scroll-link">For Passengers</a></li>
                        <li><a href="#screencast" class="scroll-link">screencast</a></li>
                    </ul>
                </div>
                <!--/.navbar-collapse-->
            </nav>
            <!--/.navbar-->
        </div>
        <!--/.container-->
    </header>
    <!--/.header-->
    <div id="#top"></div>
    <section id="home">
        <div class="banner-container">

            <img src="images/nyc_taxi.jpg" alt="banner" />



        </div>
    </section>
    <section id="introText">
        <div class="container">
            <div class="text-center">
         <p>Our group began with the knowledge that we wanted to do a project dealing with traffic and transportation that would be applicable to large groups of individuals. While searching for datasets on the internet that we could use or websites to scrape from, we stumbled across a dataset containing taxicab data from 2013 - tip amounts, fare rates, dropoff and pickup location, time of ride, distance of ride, etc. We felt this particular set had a ton of useful and easily accessible information we could use to draw interesting conclusions about fares and tip amounts as well as possibly traffic patterns. Thousands of taxi move about the city everyday transporting thousands of people, there are bound to be interesting things to discover.</p>
            </div>
        </div>
       <div class = "container person-container">
	<div class= "person left">
			<img class="team-pic" src = "images/Luciano.jpg" width="200" height="300"></img>

		<p>Luciano Arango ’16 </p>
		<p> Computer Science Concentrator</p>
		<p>Adams House</p>
		<p>Medellin, Colombia</p>
	</div>
	<div class= "person left">
			<img class="team-pic" src = "images/justin.jpg" width="200" height="300"></img>
		<p>Justin Oliver ’16</p>
		<p> Applied Math Concentrator</p>
		<p>Adams House</p>
		<p>Toronto, ON</p>
	</div>
	<div class= "person right">
		<img class="team-pic" src = "images/ali.jpg" width="200" height="300"></img>
		<p>Ali Monfre ’16</p>
		<p> Applied Math Concentrator</p>
		<p> Leverett House</p>
		<p>Green Bay, WI</p>
	</div>
</div>


    </section>
    <!--About-->
    <section id="nyctaxis" class="secPad">
        <div class="container">
            <div class="heading text-center">
                <!-- Heading -->
                <h2>INTRODUCTION</h2>
            </div>
                  <div class="container word-container">

                 <p> Our original data set was acquired by Chris Wong through a FOIL request to the NYC Taxi and Limousine Commission. Chris Wong then made the data available through links from his website to different Torrents at http://chriswhong.com/open-data/foil_nyc_taxi/. We read in a random sample of 240,000 taxi trips from 2013, and plotted their pickup locations below. You can very clearly see Manhattan and some of the other Burroughs outlined by the taxi trips, as well as the heavily-visited JFK and Laguardia Airports.</p>



            </div>

             <div class="banner-container">
             <img src="images/pickup_nyc.jpg" alt="NYC visualization" />
           	</div>

                <!-- end: -->
<!--
 				<div class="container word-container">
                <p> We see that the vast majority of trips are clustered in Manhattan and in two smaller spots outside the immediate vacinity of the city. Searching for the values of those latitudes and longitudes in Google Maps led us to discover that those smaller spots are reflective of Lagurdia and JRK Airports. As it turns out, $52 is the flat rate for a trip from Manhattan to JFK Airport, explaining the spike in fare amount noted in the histogram above.</p>
            </div> -->
        </div>
    </section>

    <!--Quote-->
    <section class="bg-parlex-two">
        <div class="parlex-back">
            <div class="container secPad text-center">
				<h2>NYC Taxis move about 600,000 people per day | 236 million per year</h2>
            </div>
            <!--/.container-->
        </div>
    </section>

    <!--Skills-->
    <section id="fraud" class="secPad white">
    	<div class="container">
        <div class="heading text-center">
                <!-- Heading -->
                <h2>FRAUD</h2>
            </div>
            <div class="container word-container">

                 <p>  We began our analysis of tip data by plotting a simple histogram of tips as a percentage of the total cost of the ride (fare + tolls + taxes). It became immediately clear that the vast majority of trips had a reported tip percentage of 0%, which seemed rather unusual.</p>
            </div>

           <div class="banner-container">
             <img src="images/Tips.png" alt="NYC visualization" />

            </div>
            <div class="container word-container">

                 <p> We quickly discovered, however, that the vast majority of the trips with 0% tip were trips where the passenger paid with cash rather than card. In fact, the average tip percentage for trips paid in cash was considerably less than 1%, where the average tip percentage for trips paid by card was almost 18%. This led us to the hypothesis that taxi drivers were likely under-reporting tips when they were paid in cash, as they could simply pocket the money and not be taxed, where when the trip was paid by card the taxi company was given the exact breakdown of fare versus tip. Thus for the sake of accurately analyzing tip data, we decided to only look at trips where the passenger paid by card. The tip data was now much more reasonable and showed predictable spikes around 10%, 15%, 20%, 25%, 30%, and 35%, which makes sense given the pre-selectable values that appear on the screen when paying by card.</p>
            </div>
             <div class="banner-container">
             <img src="images/Tips%20Corrected.png" alt="NYC visualization" />
            </div>
             <div class="container word-container">

                 <p> Now that we had clearly identified the issue of under-reporting tips, we thought it would be useful to develop a tool for predicting this fraud in order. Using this un-skewed data we were able to build a model by which we could predict the tip a driver should receive on average based on various features of the trip, such as the time of day, the length of the trip, the pickup and drop-off locations, etc. As it turns out, the most important features in determining the tip a taxi driver will receive on average are the length of the trip, the time of day the trip is taken, and the speed of the trip. The pickup and drop-off locations were also rather significant.</p>
            </div>

             <div class="banner-container">
             <img src="images/Tips%20Features.png" alt="NYC visualization" />
      				</div>
             <div class="container word-container">

                 <p> In the end, the random forest classifier was able to predict almost 40% of tips to the nearest percent. However, in predicting whether or not a cab driver is committing fraud, we are really only concerned with whether the reported tip is unreasonably low. Thus, the problem was simplified to simply predict whether the tip would be greater or less than 10%. In this new scenario, the random forest classifier was approximately 88% accurate. This thus represents a very valuable tool for predicting and cracking down on the under-reporting of cash tips.</p>
            </div>

             </div>


    </section>

    <section class="bg-parlex-three">
        <div class="parlex-back">
            <div class="container secPad text-center">
				<h2>A typical taxi travels 70,000 miles per year </h2>
            </div>
            <!--/.container-->
        </div>
    </section>


    <!--Experience-->
    <section id="traffic" class="secPad">
    	<div class="container">
           <div class="heading text-center">
                <!-- Heading -->
                <h2>TRAFFIC</h2>

            </div>
            <div class="container word-container">

                 <p> We first wanted to see if we could find any trends in the speed of taxis over the course of the day, week, and month in order to determine any correlations with trip time, cost of trip, and other features.  </p>
            </div>
                 <div class="banner-container">
             <img src="images/Speed%20over%20Week.png" alt="NYC visualization" />
            </div>
  <div class="container word-container">
                 <p> First looking at speeds over the course of the week, it is clear that trip times are slightly faster on the weekend than during the week. This makes sense given Manhattan is likely much busier during the work week when people are commuting into and out of the city. However, this trend was not reflected in any significant change in fare data or trip time.  </p>
            </div>


             <div class="banner-container">
             <img src="images/Speed.png" alt="NYC visualization" />
            </div>

             <div class="container word-container">

                 <p>Next we decided to look at speeds over the course of the day. There was a very clear increase in average speed until approximately 5:00 AM, with a minimum average speed round noon. Again, this makes sense given when the city would likely be busiest with tourists and people. Thus speed varies fairly significantly over the course of the day, but much less over the course of the week or month. </p>
            </div>
             <div class="banner-container">
             <img src="images/Number%20of%20Trips.png" alt="NYC visualization" />
            </div>
             <div class="container word-container">

                 <p> In fact, we can very clearly see this trend in speeds over the course of the day mirrored in the number of trips over the course of day. The time with the fewest number of trips was 5:00 AM, though the peak number of trips was slightly later than the speed data would suggest, closer to 7:00 PM at the end of the work day.  </p>
            </div>




    </section>

    <section class="bg-parlex">
        <div class="parlex-back">
            <div class="container secPad text-center">
				<h2>There are over 50,000  NYC taxi drivers</h2>
            </div>
            <!--/.container-->
        </div>
    </section>

   <!--Portfolio-->
    <section id="portfolio" class="page-section section appear clearfix secPad">
        <div class="container">

            <div class="heading text-center">
                <!-- Heading -->
                <h2>FOR DRIVERS</h2>
                <p>We created a Tips Heatmap so drivers can see they areas of the city that tip the most at various times of the day.</p>
                <br>
                <p>Click on the image below to use it!</p>
            </div>
            <div class="banner-container">
            <a href="./heatmap.html"> <img src="images/heatmap.png" alt="NYC visualization" /></a>
            </div>



    </section>

<section class="bg-parlex-four">
        <div class="parlex-back">
            <div class="container secPad text-center">
				<h2>There are on average 485,000 taxi trips per day in NYC</h2>
            </div>
            <!--/.container-->
        </div>
    </section>
	<!--Contact -->
<section id="passengers">
  <div class="container">
      <div class="heading text-center">

      	<h2>FOR PASSENGERS</h2>
      </div>
         <div class="container word-container">

                 <p> We also wanted to build a model that would be useful for the average person, too. So, we decided to try to predict the base fare for any given ride a person would want to take in and around the NYC area. The two factors that largely contribute to fare quote are the trip time and the trip distance, so we needed to build a model that would use machine learning to essentially predict both and return a base fare amount. We figured that using pick-up and drop-off location we would be able to query the Google Maps API to get an estimated trip distance, and that using time of day and day of the week we would be able to predict trip time based upon traffic patterns. </p>
            </div>

      	<div class="banner-container">
          <img src="images/Fares%20Over%20Day.png" alt="NYC visualization" />
        </div>
         <div class="container word-container">

                 <p> We found, however, that the day of the week and month of the year had very little effect on the average fare rate; on the other hand, as you can see above, fare rate did vary based upon the time of day. Therefore, using all 440,000 trips from January 28th, 2013, we built a random forest classifier with 50 trees to take in the pick-up location, drop-off location, trip distance, and time of day and output a predicted fare for any given day of the year. </p>
            </div>
  			<div class="banner-container">
             <img src="images/Fare%20Features.png" alt="NYC visualization" />
        </div>
         <div class="container word-container">

                 <p> We can see that trip distance is the most important factor for predicting, followed by time of day and location (presumably where the estimated trip time comes from). We then plotted our results to visually see the correlation. </p>
            </div>

        	<div class="banner-container">
             <img src="images/Fare%20Predictions.png" alt="NYC visualization" />
</div>
 <div class="container word-container">

                 <p> There is obviously a clear correlation between predicted fare and actual fare, although there is still an average variation of about ten dollars. We found, however, that we could predict a person’s fare within a range of 5 dollars on any day of the year with around 78% accuracy. We also found it to be interesting that there were so many actual and predicted fares at $52.00 exactly, so we plotted a histogram of fares. </p>
            </div>

                 <div class="banner-container">
             <img src="images/Fares.png" alt="NYC visualization" />
                <!-- end: -->
              </div>
               <div class="container word-container">

                 <p> The histogram confirms that there’s an unusual spike in the data at $52.00. After a little research, we discovered that $52.00 is the flat rate for traveling from Manhattan to JFK Airport, explaining the spike.</p>
            </div>
 </section >
<section class="bg-parlex-five">
        <div class="parlex-back">
            <div class="container secPad text-center">
				<h2>The average tip for NYC taxis is 18%</h2>
            </div>
            <!--/.container-->
        </div>
    </section>
<section id="screencast">
  <div class="container">
  	 <div class="heading text-center">

      	<h2>SCREENCAST</h2>
      </div>
      <div style="text-align:center">
       <!-- <div class="banner-container"> -->
                 <iframe width="800" height="400" src="//www.youtube.com/embed/6A4uulmuoLY" frameborder="0" allowfullscreen></iframe>

      <!--   </div> -->
      </div>
      <br>
      <br>
      <br>
      <br>

 </div>
 </section>
<!--     <iframe'
    width="600"
    height="450"
    frameborder="0" style="border:0"
    src="https://www.google.com/maps/embed/v1/place?key=AIzaSyDwR_Jjr_HvSf1ACnF7ubgCjXBSp0wztW8
      &q=Butchart+Gardens+Victoria+BC
      &attribution_source=Google+Maps+Embed+API
      &attribution_web_url=http://www.butchartgardens.com/
      &attribution_ios_deep_link_id=comgooglemaps://?daddr=Butchart+Gardens+Victoria+BC">
  </iframe>
 -->

    <footer>
        <div class="container">
            <div class="social text-center">

                <a href="https://github.com/lucianoiscool/Tipsy-taxi"><i class="fa fa-github"></i></a>
            </div>

            <div class="clear"></div>
            <!--CLEAR FLOATS-->
        </div>
    </footer>


<!--   <div id="panel">
      <h2 id = "subtitle">Now Displaying Trips at 12:00</h2>

      <div class="input_container">
  <input type="range" min="1" max="24" step="1" id="time_graph">
</div>
      <button onclick="toggleHeatmap()">Toggle Heatmap</button>
      <button onclick="changeGradient()">Change gradient</button>
      <button onclick="changeRadius()">Change radius</button>
      <button onclick="changeOpacity()">Change opacity</button>
    </div>
    <div id="map-canvas"></div>

</div> -->

    <a href="#top" class="topHome"><i class="fa fa-chevron-up fa-2x"></i></a>

    <!--[if lte IE 8]><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><![endif]-->
    <script src="js/modernizr-latest.js"></script>
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <script src="js/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script src="js/jquery.nav.js" type="text/javascript"></script>
    <script src="js/jquery.cslider.js" type="text/javascript"></script>
    <script src="js/custom.js" type="text/javascript"></script>
    <script src="js/owl-carousel/owl.carousel.js"></script>
</body>
</html>
